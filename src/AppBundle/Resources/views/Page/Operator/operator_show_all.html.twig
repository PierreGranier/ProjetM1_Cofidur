{% extends 'AppBundle::Page/Operator/operator.html.twig' %}

{% block body %}
	 
	{% if is_granted('ROLE_SUPER_ADMIN') %}
	 <label for="importSalaries">Importer les salariés (à partir d'un fichier .prn)</label> <br />	
	 <a href="{{ path('AppBundle_operator_import') }}">Importer</a>
	{#		PARTIE A SUPPRIMER
	{{ form_start(form) }}
		{{ form_row(form.fichierimport) }}
	{{ form_end(form) }} 
	
	
	<form action="/import" method="post" enctype="multipart/form-data">
		<input type="file" value="Importer les salariés" name="importSalaries" onclick="{window.location.href='{{ path('AppBundle_operator_import') }}'}"> 
	</form>
	#}
	{% endif %}
	
	<h1>Affichage de tous les opérateurs</h1>

<script src="{{ asset('bundles/appcofidur/js/sorttable.js') }}"></script>
	{% if is_granted('ROLE_ADMIN') %}
	<input type="button" value="Ajouter un opérateur" onclick="{window.location.href='{{ path('AppBundle_operator_add') }}'}">
	{% endif %}
	<br/>
	<br/>

	<table class="sortable">
	<tr>
        <th>MAT.</th>
		<th> NOM D'UTILISATEUR </th>
        <th> PRENOM </th>
        <th> NOM </th>
		<th> DATE DE NAISSANCE </th>
	</tr>
{% for operator in operators %}
	<tr>
		<td> {{ operator.registrationNumber }} </td>
        <td>
			<a href="{{ path('AppBundle_operator_show', {'idOp': operator.id}) }}">
				{{ operator.username }}
			</a>
		</td>
		<td> {{ operator.firstName }} </td>
        <td> {{ operator.lastName }} </td>
        <td> {{ operator.dateOfBirth |date("d/m/Y") }} </td>
        {% if is_granted('ROLE_ADMIN') %} 
		<td>
			<input type="button" value="Editer" onclick="{window.location.href='{{ path('AppBundle_operator_edit', {'idOp': operator.id}) }}'}">
		</td>
		<td>
			<input type="button" value="Supprimer"
				   onclick="if(confirm('Supprimer l\'operateur?')){
						   window.location.href='{{ path('AppBundle_operator_delete', {'idOp': operator.id}) }}'
						   }">
		</td>
		<td>
			<input type="button" value="RAZ mdp"
				   onclick="if(confirm('Remttre à zéro le mot de passe de cet opérateur ?')){
						   window.location.href='{{ path('AppBundle_operator_raz', {'idOp': operator.id}) }}'
						   }">
		</td>
		{% endif %}
	</tr>
{% endfor %}
</table>

{% endblock %}
